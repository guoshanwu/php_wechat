(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79d2de42"],{1245:function(e,t,s){"use strict";var i=s("0afd");function n(e){return"none"===window.getComputedStyle(e).display||null===e.offsetParent}var u=s("60d6"),a=s("0429"),r=s("64a0"),o=Object(i["a"])("list"),c=o[0],l=o[1],d=o[2];t["a"]=c({mixins:[Object(u["a"])(function(e){this.scroller||(this.scroller=Object(a["b"])(this.$el)),e(this.scroller,"scroll",this.check)})],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},direction:{type:String,default:"down"}},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var e=this;this.$nextTick(function(){if(!(e.loading||e.finished||e.error)){var t,s=e.$el,i=e.scroller,u=e.offset,a=e.direction;t=i.getBoundingClientRect?i.getBoundingClientRect():{top:0,bottom:i.innerHeight};var r=t.bottom-t.top;if(!r||n(s))return!1;var o=!1,c=e.$refs.placeholder.getBoundingClientRect();o="up"===a?c.top-t.top<=u:c.bottom-t.bottom<=u,o&&(e.$emit("input",!0),e.$emit("load"))}})},clickErrorText:function(){this.$emit("update:error",!1),this.check()}},render:function(){var e=arguments[0],t=e("div",{ref:"placeholder",class:l("placeholder")});return e("div",{class:l(),attrs:{role:"feed","aria-busy":this.loading}},["down"===this.direction?this.slots():t,this.loading&&e("div",{class:l("loading"),key:"loading"},[this.slots("loading")||e(r["a"],{attrs:{size:"16"}},[this.loadingText||d("loading")])]),this.finished&&this.finishedText&&e("div",{class:l("finished-text")},[this.finishedText]),this.error&&this.errorText&&e("div",{on:{click:this.clickErrorText},class:l("error-text")},[this.errorText]),"up"===this.direction?this.slots():t])}})},"2baa":function(e,t,s){},"4bfe":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("van-popup",{style:{height:"20%",height:"85%"},attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticClass:"van-sku-body"},e._l(e.imageList,function(e){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}]})}),0),s("div",{staticClass:"van-sku-actions"},[s("van-button",{attrs:{square:"",size:"large",type:"warning"},on:{click:e.castVote}},[e._v("\n\t\t\t\t投票\n\t\t\t")]),s("van-button",{attrs:{square:"",size:"large",type:"danger"},on:{click:e.close}},[e._v("\n\t\t\t\t关闭\n\t\t\t")])],1)])],1)},n=[],u=(s("cb54"),s("7381")),a=s("a506"),r=(s("018c"),s("ef84"),s("c012"),s("b65f"),s("f516"),s("95f3"),s("eb32"),s("fb9d"),s("9f72"),s("c378"),s("8a9a"),{"zh-CN":{vanSku:{select:"选择",selected:"已选",selectSku:"请先选择商品规格",soldout:"库存不足",originPrice:"原价",minusTip:"至少选择一件",unavailable:"商品已经无法购买啦",stock:function(e){return"剩余 "+e+"件"},quotaLimit:function(e){return"每人限购"+e+"件"},quotaCount:function(e){return"你已购买"+e+"件"}},vanSkuActions:{buy:"立即购买",addCart:"加入购物车"},vanSkuImgUploader:{oversize:function(e){return"最大可上传图片为"+e+"MB，请尝试压缩图片尺寸"},fail:"上传失败<br />重新上传"},vanSkuStepper:{num:"购买数量"},vanSkuMessages:{fill:"请填写",upload:"请上传",imageLabel:"仅限一张",invalid:{tel:"请填写正确的数字格式留言",mobile:"手机号长度为6-20位数字",email:"请填写正确的邮箱",id_no:"请填写正确的身份证号码"},placeholder:{id_no:"输入身份证号码",text:"输入文本",tel:"输入数字",email:"输入邮箱",date:"点击选择日期",time:"点击选择时间",textarea:"点击填写段落文本",mobile:"输入手机号码"}}}}),o=s("011b"),c=s("f9c5"),l=s("6e6d"),d=s("0afd"),h=s("0a24"),m=s("d45f"),p=Object(d["a"])("popup"),f=p[0],k=p[1],g=f({mixins:[m["a"]],props:{round:Boolean,duration:Number,transition:String,position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var e=this,t=function(t){return function(s){return e.$emit(t,s)}};this.onClick=t("click"),this.onOpened=t("opened"),this.onClosed=t("closed")},render:function(){var e,t=arguments[0];if(this.shouldRender){var s=this.round,i=this.position,n=this.duration,u=this.transition||("center"===i?"van-fade":"van-popup-slide-"+i),a={};return Object(h["b"])(n)&&(a.transitionDuration=n+"s"),t("transition",{attrs:{name:u},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],style:a,class:k((e={round:s},e[i]=i,e)),on:{click:this.onClick}},[this.slots()])])}}}),v=s("f3e1"),b=s("23c4"),S=s.n(b),F=s("4f29"),y=s("d48e"),C=s("182e"),x=Object(d["a"])("sku-header"),O=x[0],T=x[1];function _(e,t){var s=t.s1;if(s){var i=e.tree.filter(function(e){return"s1"===e.k_s})[0]||{};if(i.v){var n=i.v.filter(function(e){return e.id===s})[0];if(n)return n.imgUrl||n.img_url}}}function w(e,t,s,i){var n=t.sku,u=t.goods,a=t.skuEventBus,r=t.selectedSku,o=_(n,r)||u.picture,c=function(){a.$emit("sku:previewImage",o)};return e("div",S()([{class:[T(),y["a"]]},Object(F["b"])(i)]),[e("div",{class:T("img-wrap"),on:{click:c}},[e("img",{attrs:{src:o}})]),e("div",{class:T("goods-info")},[s.default&&s.default(),e(C["a"],{attrs:{name:"clear"},class:"van-sku__close-icon",on:{click:function(){a.$emit("sku:close")}}})])])}w.props={sku:Object,goods:Object,skuEventBus:Object,selectedSku:Object};var j=O(w),$=Object(d["a"])("sku-header-item"),B=$[0],I=$[1];function D(e,t,s,i){return e("div",S()([{class:I()},Object(F["b"])(i)]),[s.default&&s.default()])}var E=B(D),N=Object(d["a"])("sku-row"),V=N[0],M=N[1];function z(e,t,s,i){return e("div",S()([{class:[M(),y["a"]]},Object(F["b"])(i)]),[e("div",{class:M("title")},[t.skuRow.k]),s.default&&s.default()])}z.props={skuRow:Object};var L=V(z),q={QUOTA_LIMIT:0,STOCK_LIMIT:1},A="",P={LIMIT_TYPE:q,UNSELECTED_SKU_VALUE_ID:A},U=function(e){var t={};return e.forEach(function(e){t[e.k_s]=e.v}),t},K=function(e,t){var s=Object.keys(t).filter(function(e){return t[e]!==A});return e.length===s.length},R=function(e,t){var s=e.filter(function(e){return Object.keys(t).every(function(s){return String(e[s])===String(t[s])})});return s[0]},H=function(e,t){var s=U(e);return Object.keys(t).reduce(function(e,i){var n=s[i],u=t[i];if(u!==A){var a=n.filter(function(e){return e.id===u})[0];a&&e.push(a)}return e},[])},Q=function(e,t,s){var i,n=s.key,u=s.valueId,a=Object(c["a"])({},t,(i={},i[n]=u,i)),r=Object.keys(a).filter(function(e){return a[e]!==A}),o=e.filter(function(e){return r.every(function(t){return String(a[t])===String(e[t])})}),l=o.reduce(function(e,t){return e+=t.stock_num,e},0);return l>0},W={normalizeSkuTree:U,getSkuComb:R,getSelectedSkuValues:H,isAllSelected:K,isSkuChoosable:Q},G=Object(d["a"])("sku-row-item"),J=G[0],Y=J({props:{skuValue:Object,skuKeyStr:String,skuEventBus:Object,selectedSku:Object,skuList:{type:Array,default:function(){return[]}}},computed:{choosable:function(){return Q(this.skuList,this.selectedSku,{key:this.skuKeyStr,valueId:this.skuValue.id})}},methods:{onSelect:function(){this.choosable&&this.skuEventBus.$emit("sku:select",Object(c["a"])({},this.skuValue,{skuKeyStr:this.skuKeyStr}))}},render:function(){var e=arguments[0],t=this.skuValue.id===this.selectedSku[this.skuKeyStr],s=this.skuValue.imgUrl||this.skuValue.img_url;return e("span",{class:["van-sku-row__item",{"van-sku-row__item--active":t,"van-sku-row__item--disabled":!this.choosable}],on:{click:this.onSelect}},[s&&e("img",{class:"van-sku-row__item-img",attrs:{src:s}}),e("span",{class:"van-sku-row__item-name"},[this.skuValue.name])])}}),X=s("0252"),Z=s("e40d"),ee=Object(d["a"])("stepper"),te=ee[0],se=ee[1],ie=600,ne=200,ue=te({props:{value:null,integer:Boolean,disabled:Boolean,inputWidth:[Number,String],buttonSize:[Number,String],asyncChange:Boolean,disableInput:Boolean,min:{type:[Number,String],default:1},max:{type:[Number,String],default:1/0},step:{type:[Number,String],default:1},defaultValue:{type:[Number,String],default:1},showPlus:{type:Boolean,default:!0},showMinus:{type:Boolean,default:!0}},data:function(){var e=this.range(Object(h["b"])(this.value)?this.value:this.defaultValue);return e!==+this.value&&this.$emit("input",e),{currentValue:e}},computed:{minusDisabled:function(){return this.disabled||this.currentValue<=this.min},plusDisabled:function(){return this.disabled||this.currentValue>=this.max},inputStyle:function(){var e={};return this.inputWidth&&(e.width=Object(X["a"])(this.inputWidth)),this.buttonSize&&(e.height=Object(X["a"])(this.buttonSize)),e},buttonStyle:function(){var e={};if(this.buttonSize){var t=Object(X["a"])(this.buttonSize);e.width=t,e.height=t}return e}},watch:{value:function(e){e!==this.currentValue&&(this.currentValue=this.format(e))},currentValue:function(e){this.$emit("input",e),this.$emit("change",e)}},methods:{format:function(e){return e=String(e).replace(/[^0-9.-]/g,""),""===e?0:this.integer?Math.floor(e):+e},range:function(e){return Math.max(Math.min(this.max,this.format(e)),this.min)},onInput:function(e){var t=e.target.value,s=this.format(t);this.asyncChange?(e.target.value=this.currentValue,this.$emit("input",s),this.$emit("change",s)):(+t!==s&&(e.target.value=s),this.currentValue=s)},onChange:function(){var e=this.type;if(this[e+"Disabled"])this.$emit("overlimit",e);else{var t="minus"===e?-this.step:+this.step,s=Math.round(100*(this.currentValue+t))/100;this.asyncChange?(this.$emit("input",s),this.$emit("change",s)):this.currentValue=this.range(s),this.$emit(e)}},onFocus:function(e){this.$emit("focus",e)},onBlur:function(e){this.currentValue=this.range(this.currentValue),this.$emit("blur",e),0===this.currentValue&&(e.target.value=this.currentValue),Object(Z["a"])()},longPressStep:function(){var e=this;this.longPressTimer=setTimeout(function(){e.onChange(e.type),e.longPressStep(e.type)},ne)},onTouchStart:function(){var e=this;clearTimeout(this.longPressTimer),this.isLongPress=!1,this.longPressTimer=setTimeout(function(){e.isLongPress=!0,e.onChange(),e.longPressStep()},ie)},onTouchEnd:function(e){clearTimeout(this.longPressTimer),this.isLongPress&&e.preventDefault()}},render:function(){var e=this,t=arguments[0],s=function(t){return{on:{click:function(){e.type=t,e.onChange()},touchstart:function(){e.type=t,e.onTouchStart(t)},touchend:e.onTouchEnd,touchcancel:e.onTouchEnd}}};return t("div",{class:se()},[t("button",S()([{directives:[{name:"show",value:this.showMinus}],style:this.buttonStyle,class:se("minus",{disabled:this.minusDisabled})},s("minus")])),t("input",{attrs:{type:"number",role:"spinbutton","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.currentValue,disabled:this.disabled||this.disableInput},class:se("input"),domProps:{value:this.currentValue},style:this.inputStyle,on:{input:this.onInput,focus:this.onFocus,blur:this.onBlur}}),t("button",S()([{directives:[{name:"show",value:this.showPlus}],style:this.buttonStyle,class:se("plus",{disabled:this.plusDisabled})},s("plus")]))])}}),ae=Object(d["a"])("sku-stepper"),re=ae[0],oe=ae[2],ce=q.QUOTA_LIMIT,le=q.STOCK_LIMIT,de=re({props:{stock:Number,skuEventBus:Object,skuStockNum:Number,selectedNum:Number,stepperTitle:String,disableStepperInput:Boolean,customStepperConfig:Object,quota:{type:Number,default:0},quotaUsed:{type:Number,default:0}},data:function(){return{currentNum:this.selectedNum,limitType:le}},watch:{currentNum:function(e){this.skuEventBus.$emit("sku:numChange",e)},stepperLimit:function(e){e<this.currentNum&&(this.currentNum=e)}},computed:{stepperLimit:function(){var e,t=this.quota-this.quotaUsed;return this.quota>0&&t<=this.stock?(e=t<0?0:t,this.limitType=ce):(e=this.stock,this.limitType=le),e}},methods:{setCurrentNum:function(e){this.currentNum=e},onOverLimit:function(e){this.skuEventBus.$emit("sku:overLimit",{action:e,limitType:this.limitType,quota:this.quota,quotaUsed:this.quotaUsed})},onChange:function(e){var t=this.customStepperConfig.handleStepperChange;t&&t(e),this.$emit("change",e)}},render:function(){var e=this,t=arguments[0];return t("div",{class:"van-sku-stepper-stock"},[t("div",{class:"van-sku-stepper-container"},[t("div",{class:"van-sku__stepper-title"},[this.stepperTitle||oe("num")]),t(ue,{class:"van-sku__stepper",attrs:{max:this.stepperLimit,disableInput:this.disableStepperInput},on:{overlimit:this.onOverLimit,change:this.onChange},model:{value:e.currentNum,callback:function(t){e.currentNum=t}}})])])}}),he=s("cbdb"),me=s("15b4"),pe=s("3607");function fe(e){var t=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;return t.test(e)}var ke=s("cca1"),ge=s("64a0"),ve=s("2794"),be=Object(d["a"])("sku-img-uploader"),Se=be[0],Fe=be[1],ye=be[2],Ce=Se({props:{value:String,uploadImg:Function,maxSize:{type:Number,default:6}},data:function(){return{paddingImg:"",uploadFail:!1}},methods:{afterReadFile:function(e){var t=this;this.paddingImg=e.content,this.uploadFail=!1,this.uploadImg(e.file,e.content).then(function(e){t.$emit("input",e),t.$nextTick(function(){t.paddingImg=""})}).catch(function(){t.uploadFail=!0})},onOversize:function(){this.$toast(ye("oversize",this.maxSize))},renderUploader:function(e,t){void 0===t&&(t=!1);var s=this.$createElement;return s(ve["a"],{class:Fe("uploader"),attrs:{disabled:t,afterRead:this.afterReadFile,maxSize:1024*this.maxSize*1024},on:{oversize:this.onOversize}},[s("div",{class:Fe("img")},[e])])},renderMask:function(){var e=this.$createElement;return e("div",{class:Fe("mask")},[this.uploadFail?[e(C["a"],{attrs:{name:"warning-o",size:"20px"}}),e("div",{class:Fe("warn-text"),domProps:{innerHTML:ye("fail")}})]:e(ge["a"],{attrs:{type:"spinner",size:"20px",color:"white"}})])}},render:function(){var e=this,t=arguments[0];return t("div",{class:Fe()},[this.value&&this.renderUploader([t("img",{attrs:{src:this.value}}),t(C["a"],{attrs:{name:"clear"},class:Fe("delete"),on:{click:function(){e.$emit("input","")}}})],!0),this.paddingImg&&this.renderUploader([t("img",{attrs:{src:this.paddingImg}}),this.renderMask()],!this.uploadFail),!this.value&&!this.paddingImg&&this.renderUploader(t("div",{class:Fe("trigger")},[t(C["a"],{attrs:{name:"photograph",size:"22px"}})]))])}}),xe=Object(d["a"])("sku-messages"),Oe=xe[0],Te=xe[1],_e=xe[2],we=Oe({props:{messages:{type:Array,default:function(){return[]}},messageConfig:Object,goodsId:[Number,String]},data:function(){return{messageValues:this.resetMessageValues(this.messages)}},watch:{messages:function(e){this.messageValues=this.resetMessageValues(e)}},methods:{resetMessageValues:function(e){return(e||[]).map(function(){return{value:""}})},getType:function(e){return 1===+e.multiple?"textarea":"id_no"===e.type?"text":e.datetime>0?"datetime-local":e.type},getMessages:function(){var e=this,t={};return this.messageValues.forEach(function(s,i){var n=s.value;e.messages[i].datetime>0&&(n=n.replace(/T/g," ")),t["message_"+i]=n}),t},getCartMessages:function(){var e=this,t={};return this.messageValues.forEach(function(s,i){var n=s.value,u=e.messages[i];u.datetime>0&&(n=n.replace(/T/g," ")),t[u.name]=n}),t},getPlaceholder:function(e){var t=1===+e.multiple?"textarea":e.type,s=this.messageConfig.placeholderMap||{};return e.placeholder||s[t]||_e("placeholder."+t)},validateMessages:function(){for(var e=this.messageValues,t=0;t<e.length;t++){var s=e[t].value,i=this.messages[t];if(""===s){if("1"===String(i.required)){var n=_e("image"===i.type?"upload":"fill");return n+i.name}}else{if("tel"===i.type&&!Object(ke["a"])(s))return _e("invalid.tel");if("mobile"===i.type&&!/^\d{6,20}$/.test(s))return _e("invalid.mobile");if("email"===i.type&&!fe(s))return _e("invalid.email");if("id_no"===i.type&&(s.length<15||s.length>18))return _e("invalid.id_no")}}}},render:function(){var e=this,t=arguments[0];return t(me["a"],{class:Te()},[this.messages.map(function(s,i){return"image"===s.type?t(he["a"],{class:Te("image-cell"),attrs:{"value-class":Te("image-cell-value"),label:_e("imageLabel"),title:s.name,required:"1"===String(s.required)},key:e.goodsId+"-"+i},[t(Ce,{attrs:{uploadImg:e.messageConfig.uploadImg,maxSize:e.messageConfig.uploadMaxSize},model:{value:e.messageValues[i].value,callback:function(t){e.messageValues[i].value=t}}})]):t(pe["a"],{attrs:{maxlength:"200",label:s.name,required:"1"===String(s.required),placeholder:e.getPlaceholder(s),type:e.getType(s)},key:e.goodsId+"-"+i,model:{value:e.messageValues[i].value,callback:function(t){e.messageValues[i].value=t}}})})])}}),je=s("5143"),$e=Object(d["a"])("sku-actions"),Be=$e[0],Ie=$e[1],De=$e[2];function Ee(e,t,s,i){var n=function(e){return function(){t.skuEventBus.$emit(e)}};return e("div",S()([{class:Ie()},Object(F["b"])(i)]),[t.showAddCartBtn&&e(je["a"],{attrs:{size:"large",type:"warning",text:t.addCartText||De("addCart")},on:{click:n("sku:addCart")}}),e(je["a"],{attrs:{size:"large",type:"danger",text:t.buyText||De("buy")},on:{click:n("sku:buy")}})])}Ee.props={buyText:String,addCartText:String,skuEventBus:Object,showAddCartBtn:Boolean};var Ne=Be(Ee),Ve=Object(d["a"])("sku"),Me=Ve[0],ze=Ve[2],Le=q.QUOTA_LIMIT,qe=Me({props:{sku:Object,priceTag:String,goods:Object,value:Boolean,buyText:String,goodsId:[Number,String],hideStock:Boolean,addCartText:String,stepperTitle:String,getContainer:Function,hideQuotaText:Boolean,hideSelectedText:Boolean,resetStepperOnHide:Boolean,customSkuValidator:Function,closeOnClickOverlay:Boolean,disableStepperInput:Boolean,resetSelectedSkuOnHide:Boolean,quota:{type:Number,default:0},quotaUsed:{type:Number,default:0},initialSku:{type:Object,default:function(){return{}}},showSoldoutSku:{type:Boolean,default:!0},showAddCartBtn:{type:Boolean,default:!0},bodyOffsetTop:{type:Number,default:200},messageConfig:{type:Object,default:function(){return{placeholderMap:{},uploadImg:function(){return Promise.resolve()},uploadMaxSize:5}}},customStepperConfig:{type:Object,default:function(){return{}}}},data:function(){return{selectedSku:{},selectedNum:1,show:this.value}},watch:{show:function(e){this.$emit("input",e),e||(this.$emit("sku-close",{selectedSkuValues:this.selectedSkuValues,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb}),this.resetStepperOnHide&&this.resetStepper(),this.resetSelectedSkuOnHide&&this.resetSelectedSku(this.skuTree))},value:function(e){this.show=e},skuTree:"resetSelectedSku"},computed:{skuGroupClass:function(){return["van-sku-group-container",{"van-sku-group-container--hide-soldout":!this.showSoldoutSku}]},bodyStyle:function(){if(!this.$isServer){var e=window.innerHeight-this.bodyOffsetTop;return{maxHeight:e+"px"}}},isSkuCombSelected:function(){return K(this.sku.tree,this.selectedSku)},isSkuEmpty:function(){return 0===Object.keys(this.sku).length},hasSku:function(){return!this.sku.none_sku},selectedSkuComb:function(){return this.hasSku?this.isSkuCombSelected?R(this.sku.list,this.selectedSku):null:{id:this.sku.collection_id,price:Math.round(100*this.sku.price),stock_num:this.sku.stock_num}},selectedSkuValues:function(){return H(this.skuTree,this.selectedSku)},price:function(){return this.selectedSkuComb?(this.selectedSkuComb.price/100).toFixed(2):this.sku.price},originPrice:function(){return this.selectedSkuComb&&this.selectedSkuComb.origin_price?(this.selectedSkuComb.origin_price/100).toFixed(2):this.sku.origin_price},skuTree:function(){return this.sku.tree||[]},imageList:function(){var e=[this.goods.picture];if(this.skuTree.length>0){var t=this.skuTree.filter(function(e){return"s1"===e.k_s})[0]||{};if(!t.v)return e;t.v.forEach(function(t){var s=t.imgUrl||t.img_url;s&&e.push(s)})}return e},stock:function(){var e=this.customStepperConfig.stockNum;return void 0!==e?e:this.selectedSkuComb?this.selectedSkuComb.stock_num:this.sku.stock_num},stockText:function(){var e=this.customStepperConfig.stockFormatter;return e?e(this.stock):ze("stock",this.stock)},quotaText:function(){var e=this.customStepperConfig,t=e.quotaText,s=e.hideQuotaText;if(s)return"";var i="";return t?i=t:this.quota>0&&(i=ze("quotaLimit",this.quota)),i},selectedText:function(){var e=this;if(this.selectedSkuComb)return ze("selected")+" "+this.selectedSkuValues.map(function(e){return e.name}).join("；");var t=this.skuTree.filter(function(t){return e.selectedSku[t.k_s]===A}).map(function(e){return e.k}).join("；");return ze("select")+" "+t}},created:function(){var e=new l["a"];this.skuEventBus=e,e.$on("sku:close",this.onClose),e.$on("sku:select",this.onSelect),e.$on("sku:numChange",this.onNumChange),e.$on("sku:previewImage",this.onPreviewImage),e.$on("sku:overLimit",this.onOverLimit),e.$on("sku:addCart",this.onAddCart),e.$on("sku:buy",this.onBuy),this.resetStepper(),this.resetSelectedSku(this.skuTree),this.$emit("after-sku-create",e)},methods:{resetStepper:function(){var e=this.$refs.skuStepper,t=this.initialSku.selectedNum,s=Object(h["b"])(t)?t:1;e?e.setCurrentNum(s):this.selectedNum=s},resetSelectedSku:function(e){var t=this;this.selectedSku={},e.forEach(function(e){t.selectedSku[e.k_s]=t.initialSku[e.k_s]||A}),e.forEach(function(e){var s=e.k_s,i=e.v[0].id;1===e.v.length&&Q(t.sku.list,t.selectedSku,{key:s,valueId:i})&&(t.selectedSku[s]=i)})},getSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getMessages():{}},getSkuCartMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.getCartMessages():{}},validateSkuMessages:function(){return this.$refs.skuMessages?this.$refs.skuMessages.validateMessages():""},validateSku:function(){if(0===this.selectedNum)return ze("unavailable");if(this.isSkuCombSelected)return this.validateSkuMessages();if(this.customSkuValidator){var e=this.customSkuValidator(this);if(e)return e}return ze("selectSku")},onClose:function(){this.show=!1},onSelect:function(e){var t,s;this.selectedSku=this.selectedSku[e.skuKeyStr]===e.id?Object(c["a"])({},this.selectedSku,(t={},t[e.skuKeyStr]=A,t)):Object(c["a"])({},this.selectedSku,(s={},s[e.skuKeyStr]=e.id,s)),this.$emit("sku-selected",{skuValue:e,selectedSku:this.selectedSku,selectedSkuComb:this.selectedSkuComb})},onNumChange:function(e){this.selectedNum=e},onPreviewImage:function(e){var t=this,s=this.imageList.findIndex(function(t){return t===e}),i={index:s,imageList:this.imageList,indexImage:e};this.$emit("open-preview",i),Object(v["a"])({images:this.imageList,startPosition:s,closeOnPopstate:!0,onClose:function(){t.$emit("close-preview",i)}})},onOverLimit:function(e){var t=e.action,s=e.limitType,i=e.quota,n=e.quotaUsed,a=this.customStepperConfig.handleOverLimit;if(a)a(e);else if("minus"===t)Object(u["a"])(ze("minusTip"));else if("plus"===t)if(s===Le){var r=ze("quotaLimit",i);n>0&&(r+="，"+ze("quotaCount",n)),Object(u["a"])(r)}else Object(u["a"])(ze("soldout"))},onAddCart:function(){this.onBuyOrAddCart("add-cart")},onBuy:function(){this.onBuyOrAddCart("buy-clicked")},onBuyOrAddCart:function(e){var t=this.validateSku();t?Object(u["a"])(t):this.$emit(e,this.getSkuData())},getSkuData:function(){return{goodsId:this.goodsId,selectedNum:this.selectedNum,selectedSkuComb:this.selectedSkuComb,messages:this.getSkuMessages(),cartMessages:this.getSkuCartMessages()}}},render:function(){var e=this,t=arguments[0];if(!this.isSkuEmpty){var s=this.sku,i=this.goods,n=this.price,u=this.originPrice,a=this.skuEventBus,r=this.selectedSku,o=this.selectedNum,c=this.stepperTitle,l=this.hideQuotaText,d=this.selectedSkuComb,h={price:n,originPrice:u,selectedNum:o,skuEventBus:a,selectedSku:r,selectedSkuComb:d},m=function(t){return e.slots(t,h)},p=m("sku-header")||t(j,{attrs:{sku:s,goods:i,skuEventBus:a,selectedSku:r}},[m("sku-header-price")||t("div",{class:"van-sku__goods-price"},[t("span",{class:"van-sku__price-symbol"},["￥"]),t("span",{class:"van-sku__price-num"},[n]),this.priceTag&&t("span",{class:"van-sku__price-tag"},[this.priceTag])]),m("sku-header-origin-price")||u&&t(E,[ze("originPrice")," ￥",u]),!this.hideStock&&t(E,[t("span",{class:"van-sku__stock"},[this.stockText]),!l&&this.quotaText&&t("span",{class:"van-sku__quota"},["(",this.quotaText,")"])]),this.hasSku&&!this.hideSelectedText&&t(E,[this.selectedText]),m("sku-header-extra")]),f=m("sku-group")||this.hasSku&&t("div",{class:this.skuGroupClass},[this.skuTree.map(function(e){return t(L,{attrs:{skuRow:e}},[e.v.map(function(i){return t(Y,{attrs:{skuList:s.list,skuValue:i,selectedSku:r,skuEventBus:a,skuKeyStr:e.k_s}})})])})]),k=m("sku-stepper")||t(de,{ref:"skuStepper",attrs:{stock:this.stock,quota:this.quota,quotaUsed:this.quotaUsed,skuEventBus:a,selectedNum:o,selectedSku:r,stepperTitle:c,skuStockNum:s.stock_num,disableStepperInput:this.disableStepperInput,customStepperConfig:this.customStepperConfig},on:{change:function(t){e.$emit("stepper-change",t)}}}),v=m("sku-messages")||t(we,{ref:"skuMessages",attrs:{goodsId:this.goodsId,messageConfig:this.messageConfig,messages:s.messages}}),b=m("sku-actions")||t(Ne,{attrs:{buyText:this.buyText,skuEventBus:a,addCartText:this.addCartText,showAddCartBtn:this.showAddCartBtn}});return t(g,{attrs:{position:"bottom",getContainer:this.getContainer,closeOnClickOverlay:this.closeOnClickOverlay,round:!0},class:"van-sku-container",model:{value:e.show,callback:function(t){e.show=t}}},[p,t("div",{class:"van-sku-body",style:this.bodyStyle},[m("sku-body-top"),f,m("extra-sku-group"),k,v]),b])}}});o["a"].add(r),qe.SkuActions=Ne,qe.SkuHeader=j,qe.SkuHeaderItem=E,qe.SkuMessages=we,qe.SkuStepper=de,qe.SkuRow=L,qe.SkuRowItem=Y,qe.skuHelper=W,qe.skuConstants=P;var Ae,Pe=qe,Ue=(s("5a9c"),s("7364"),s("3191")),Ke={components:(Ae={},Object(a["a"])(Ae,g.name,g),Object(a["a"])(Ae,je["a"].name,je["a"]),Object(a["a"])(Ae,Pe.name,Pe),Ae),props:{voteData:{type:Object}},data:function(){return{show:!1,imageList:[]}},created:function(){this.imageList=this.voteData.all_url},methods:{close:function(){this.show=!1},isShow:function(){this.show=!0},castVote:function(){var e={id:this.voteData.id,openid:this.voteData.openid};Object(Ue["a"])(e).then(function(e){1===e.code?u["a"].success(e.msg):u["a"].fail(e.msg)})}}},Re=Ke,He=(s("880b"),s("6691")),Qe=Object(He["a"])(Re,i,n,!1,null,null,null);t["a"]=Qe.exports},"7ec4":function(e,t,s){},"880b":function(e,t,s){"use strict";var i=s("7ec4"),n=s.n(i);n.a},"8a9a":function(e,t,s){},f6bb:function(e,t,s){"use strict";s("018c"),s("2baa")},fb9d:function(e,t,s){}}]);